<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button>Start game!</button>
    <p class="result"></p>
    <script>
        const computerPlay = () => {
            const randomNumber = Math.floor((Math.random() * 3) + 1);
            //console.log(randomNumber);
            if (randomNumber === 1) return "rock"
            else if (randomNumber === 2) return "scissors"
            else if (randomNumber === 3) return "paper";
        };
        //console.log(computerPlay());

        const playRound = (computerSelection, playerSelection) => {
            //const playerSelection = playerSelect.toLowerCase();
            console.log("Computer choise is " + computerSelection);

            if (computerSelection === playerSelection) return 0
            else if (((playerSelection === 'rock') && (computerSelection === 'paper')) ||
                ((playerSelection === 'paper') && (computerSelection === 'scissors')) ||
                ((playerSelection === 'scissors') && (computerSelection === 'rock')))
                //return `"You Lose! ${computerSelection} beats ${playerSelection}"`
                return -1
            else if (((playerSelection === 'rock') && (computerSelection === 'scissors')) ||
                ((playerSelection === 'paper') && (computerSelection === 'rock')) ||
                ((playerSelection === 'scissors') && (computerSelection === 'paper')))
                //return `"You Win! ${playerSelection} beats ${computerSelection}"`;
                return 1
        };

        const game = () => {
            let user = 0;
            let computer = 0;

            const userPrompt = () => {
                let choice = prompt("Rock, Paper or Scissors?");
                console.log("Typed " + choice);
                if(choice === null) {
                    userPrompt();
                }
                else if(choice.toLowerCase() === "rock" || choice.toLowerCase() === "paper" || choice.toLowerCase() === "scissors"){
                    return choice.toLowerCase();
                }
                else userPrompt();
            };
            
            for (i = 0; i < 5; i++) {
                user += playRound(computerPlay(), userPrompt());
            };

            if (user > computer)
                return "You Win!"
            else if (computer > user)
                return "You Lose!"
            else if (computer === user)
                return "Equal!";

        }
        const btn = document.querySelector("button");
        const p = document.querySelector(".result");
        btn.onclick = () => {
            p.textContent = game();
        };

    </script>
</body>

</html>